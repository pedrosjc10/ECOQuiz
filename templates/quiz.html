<!DOCTYPE html>
<html>
<head>
    <title>EcoQuiz üå±</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div class="quiz-container">
        <h1>EcoQuiz ‚Äì Sustentabilidade üåç</h1>
        <form id="quiz-form" method="post" action="/submit">
            <!-- Campo oculto com o nome do usu√°rio -->
            <input type="hidden" name="name" value="{{ name }}">
            
            {% for q in questions %}
                {% set q_index = loop.index %}
                <div class="card question-card">
                    <p><b>{{ q_index }}. {{ q.question }}</b></p>
                    {% for opt in q.options %}
                        {% set opt_index = loop.index %}
                        <div class="option-container">
                            <input type="radio" 
                                   id="q{{ q_index }}-opt{{ opt_index }}" 
                                   name="q{{ q_index }}" 
                                   value="{{ opt }}" required>
                            <label for="q{{ q_index }}-opt{{ opt_index }}">{{ opt }}</label>
                        </div>
                    {% endfor %}
                    <!-- Campo oculto com a resposta correta -->
                    <input type="hidden" name="correct{{ q_index }}" value="{{ q.answer }}">
                </div>
            {% endfor %}
            
            <button type="submit" class="btn submit-btn">Finalizar Quiz</button>
        </form>
    </div>
    
    <script>
        // Valida√ß√£o antes de enviar
        document.getElementById('quiz-form').addEventListener('submit', function(e) {
            const questions = document.querySelectorAll('.question-card');
            let allAnswered = true;
            
            questions.forEach(function(question, index) {
                const selected = question.querySelector('input[type="radio"]:checked');
                if (!selected) {
                    allAnswered = false;
                    alert(`Por favor, responda a pergunta ${index + 1}`);
                    e.preventDefault();
                    return false;
                }
            });
            
            if (allAnswered) {
                alert('Quiz enviado com sucesso! Verificando suas respostas...');
            }
        });
    </script>
</body>
</html>
